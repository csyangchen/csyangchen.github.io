---
title: MySQL表空间回收
---

MySQL / InnoDB存储引擎, 单表一个文件管理, 即便删除了大量数据, 也不会减少磁盘占用

办法:

- 重建表
- 时间分区表, 一个分区一个文件, 从而可以通过淘汰历史分区减少磁盘占用


# char / varchar / text 存储

数据库每行定长存储自然更优, 但是实际上

- char定长空间存储, 除非很明确的场景, 如地区吗, 哈希值等, 否则尽量避免.
- varchar限定最大长度, 没有特别理由时候都可以放长一些, 避免一些奇葩的业务场景需求后又得改表定义.
  - 限制的实际存储长度, 不是字符长 ???

小于一定阈值时, varchar 和 text 无区别, 都是和改行数据一起存储

# 表空间回收计划

数据删除不能减少存储占用

# compression / 表存储开压缩有用么 ???

